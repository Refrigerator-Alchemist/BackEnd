<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/style.css">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <title>Bithigh 게시판</title>


</head>
<body>
<h2 class="container">게시판</h2>
<div class="container" style="float: left; margin: 30px; margin-right: 20px;">
  <div>
    <h3 style="text-align: center;">게시물</h3>
  </div>
  <div class="notice_board">
    <!-- title 열 -->
    <ul class="board_row title_row ">
      <li class="w70">번호</li>
      <li class="w500">제목</li>
      <li class="w120">작성자</li>
      <li class="w100">작성일</li>
      <li class="w100">조회</li>
    </ul>
    <script>
        // API로부터 데이터를 받아오는 함수
         function fetchData() {
            $.ajax({
              url: "/board/apiTest",
              type: "GET",
              async: false,   //비동기로 해야 배열을 전역변수로 쓸수 있음~!!!
              success: function(data) {
                    return data;
                    }
              });
        //   try {
        //     const response = await fetch('/board/apiTest');
        //     const responseData = await response.json();
        //     console.log("Q");
        //     console.log(responseData.title[0]);
        //     return responseData;
        //   } catch (error) {
        //     console.error('Error fetching data:', error);
        //   }
        }

        // 데이터를 받아오고 화면에 출력하는 함수
         function loadDataAndPrint() {
          const responseData =  fetchData();
          if (responseData) {
            let data = [];
            for (let i = 0; i < responseData.texts.length; i++) {
              let item = {
                notice_num: i + 1,
                title: responseData.title[i],
                writer: responseData.nickName[i],
                date_created: "", // 날짜 정보는 API에서 제공되지 않으므로 비워둠
                lookup_num: "", // 조회수 정보는 API에서 제공되지 않으므로 비워둠
              };
              data.push(item);
            }
            post_data_print(1, data);
          }
        }

        // 게시글 데이터 출력 함수
        function post_data_print(block, data) {
          let notice_board = document.querySelector(".notice_board");
          notice_board.innerHTML = ""; // 기존 게시글 초기화

          for (let i = (block - 1) * 10; i < block * 10 && i < data.length; i++) {
            let post = document.createElement("ul");
            post.className = "board_row data_row";

            let post_data = [
              data[i].notice_num,
              data[i].title,
              data[i].writer,
              data[i].date_created,
              data[i].lookup_num
            ];

            for (let j = 0; j < post_data.length; j++) {
              let li = document.createElement("li");
              li.textContent = post_data[j];
              post.appendChild(li);
            }

            notice_board.appendChild(post);
          }
        }

        // 페이지 로드 시 실행
        window.onload = function () {
          loadDataAndPrint();
        };
        loadDataAndPrint();
      </script>
    <!-- 게시글 추가로 들어오는 위치 -->
  </div>
  <!-- 페이지 블럭 -->
  <div class="pagination">
    <button class="before_move" onclick="before()">이전</button>
    <div class="block">
      <!-- 블럭 추가로 들어오는 위치 -->
    </div>
    <button class="next_move" onclick="next()">다음</button>
  </div>
</div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/style.css">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <title>Bithigh 게시판</title>


</head>
<body>
<h2 class="container">게시판</h2>
<div class="container" style="float: left; margin: 30px; margin-right: 20px;">
  <div>
    <h3 style="text-align: center;">게시물</h3>
  </div>
  <div class="notice_board">
    <!-- title 열 -->
    <ul class="board_row title_row ">
      <li class="w70">번호</li>
      <li class="w500">제목</li>
      <li class="w120">작성자</li>
      <li class="w100">작성일</li>
      <li class="w100">조회</li>
    </ul>
    <script>
        // API로부터 데이터를 받아오는 함수
         function fetchData() {
            $.ajax({
              url: "/board/apiTest",
              type: "GET",
              async: false,   //비동기로 해야 배열을 전역변수로 쓸수 있음~!!!
              success: function(data) {
                    return data;
                    }
              });
        //   try {
        //     const response = await fetch('/board/apiTest');
        //     const responseData = await response.json();
        //     console.log("Q");
        //     console.log(responseData.title[0]);
        //     return responseData;
        //   } catch (error) {
        //     console.error('Error fetching data:', error);
        //   }
        }

        // 데이터를 받아오고 화면에 출력하는 함수
         function loadDataAndPrint() {
          const responseData =  fetchData();
          if (responseData) {
            let data = [];
            for (let i = 0; i < responseData.texts.length; i++) {
              let item = {
                notice_num: i + 1,
                title: responseData.title[i],
                writer: responseData.nickName[i],
                date_created: "", // 날짜 정보는 API에서 제공되지 않으므로 비워둠
                lookup_num: "", // 조회수 정보는 API에서 제공되지 않으므로 비워둠
              };
              data.push(item);
            }
            post_data_print(1, data);
          }
        }

        // 게시글 데이터 출력 함수
        function post_data_print(block, data) {
          let notice_board = document.querySelector(".notice_board");
          notice_board.innerHTML = ""; // 기존 게시글 초기화

          for (let i = (block - 1) * 10; i < block * 10 && i < data.length; i++) {
            let post = document.createElement("ul");
            post.className = "board_row data_row";

            let post_data = [
              data[i].notice_num,
              data[i].title,
              data[i].writer,
              data[i].date_created,
              data[i].lookup_num
            ];

            for (let j = 0; j < post_data.length; j++) {
              let li = document.createElement("li");
              li.textContent = post_data[j];
              post.appendChild(li);
            }

            notice_board.appendChild(post);
          }
        }

        // 페이지 로드 시 실행
        window.onload = function () {
          loadDataAndPrint();
        };
        loadDataAndPrint();
      </script>
    <!-- 게시글 추가로 들어오는 위치 -->
  </div>
  <!-- 페이지 블럭 -->
  <div class="pagination">
    <button class="before_move" onclick="before()">이전</button>
    <div class="block">
      <!-- 블럭 추가로 들어오는 위치 -->
    </div>
    <button class="next_move" onclick="next()">다음</button>
  </div>
</div>
</body>
</html>
